{% extends "base.html" %}

{% block title %}Interview: {{ project.topic }} - Boswell{% endblock %}

{% block head %}
<style>
    .guest-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 2rem;
        position: relative;
    }

    /* Dramatic ambient glow */
    .guest-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 800px;
        height: 400px;
        background: radial-gradient(ellipse at center top, var(--accent-glow) 0%, transparent 70%);
        opacity: 0.8;
        pointer-events: none;
    }

    .guest-card {
        background: var(--bg-elevated);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 3rem;
        width: 100%;
        max-width: 600px;
        position: relative;
        animation: fadeIn 0.6s ease forwards;
    }

    .guest-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--accent), transparent);
    }

    .guest-header {
        text-align: center;
        margin-bottom: 2.5rem;
    }

    .guest-brand {
        font-family: var(--font-display);
        font-size: 1rem;
        color: var(--fg-dim);
        text-transform: uppercase;
        letter-spacing: 0.15em;
        margin-bottom: 1.5rem;
    }

    .guest-topic {
        font-family: var(--font-display);
        font-size: 2.25rem;
        font-weight: 400;
        color: var(--fg);
        line-height: 1.2;
        margin-bottom: 1rem;
    }

    .guest-duration {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: var(--bg-surface);
        padding: 0.5rem 1rem;
        border-radius: 999px;
        font-size: 0.875rem;
        color: var(--fg-muted);
    }

    .guest-duration svg {
        width: 16px;
        height: 16px;
        opacity: 0.6;
    }

    .info-section {
        margin-bottom: 2rem;
    }

    .info-section h3 {
        font-family: var(--font-body);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--fg-dim);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .info-section h3::after {
        content: '';
        flex: 1;
        height: 1px;
        background: var(--border);
    }

    .info-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .info-list li {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 0.875rem 0;
        border-bottom: 1px solid var(--border);
        color: var(--fg-muted);
        font-size: 0.9375rem;
        line-height: 1.5;
    }

    .info-list li:last-child {
        border-bottom: none;
    }

    .info-list .icon {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        color: var(--accent);
        margin-top: 0.125rem;
    }

    .info-list strong {
        color: var(--fg);
        font-weight: 500;
    }

    .start-form {
        margin-top: 2rem;
    }

    .start-form .btn {
        width: 100%;
        padding: 1.125rem 2rem;
        font-size: 1rem;
        font-weight: 500;
    }

    .guest-footer {
        text-align: center;
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border);
        font-size: 0.8125rem;
        color: var(--fg-dim);
    }

    /* Decorative elements */
    .decoration {
        position: absolute;
        border: 1px solid var(--border);
        border-radius: 50%;
        opacity: 0.2;
        pointer-events: none;
    }

    .decoration-1 {
        width: 300px;
        height: 300px;
        top: -150px;
        right: -150px;
    }

    .decoration-2 {
        width: 200px;
        height: 200px;
        bottom: -100px;
        left: -100px;
    }
</style>
{% endblock %}

{% block body %}
<div class="guest-container">
    <div class="guest-card">
        <div class="decoration decoration-1"></div>
        <div class="decoration decoration-2"></div>

        <div class="guest-header">
            <div class="guest-brand">Boswell Interview</div>
            <h1 class="guest-topic">{{ project.topic }}</h1>
            <div class="guest-duration">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Approximately {{ project.target_minutes }} minutes
            </div>
        </div>

        <div class="info-section">
            <h3>Before you begin</h3>
            <ul class="info-list">
                <li>
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                    <span><strong>Privacy:</strong> Your responses will be recorded and analyzed to help with research. They will not be shared with anyone outside the research team and will be deleted from our servers upon completion of the project.</span>
                </li>
                <li>
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <span><strong>Transcript:</strong> A full transcript of the conversation will be saved.</span>
                </li>
                <li>
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                    </svg>
                    <span><strong>"Forget that":</strong> If you say something you'd like removed, just say "forget that" and it will be excluded from the final transcript.</span>
                </li>
            </ul>
        </div>

        {% if is_returning %}
        <div class="info-section" style="background: var(--accent-subtle); padding: 1.25rem; border-radius: var(--radius-md); margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                <svg style="width: 20px; height: 20px; color: var(--accent); flex-shrink: 0; margin-top: 0.125rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                <div>
                    <p style="color: var(--accent); font-size: 0.9375rem; font-weight: 500; margin: 0 0 0.5rem 0;">
                        Welcome back, {{ interview.name }}!
                    </p>
                    {% if previous_session_date %}
                    <p style="color: var(--fg-muted); font-size: 0.8125rem; margin: 0 0 0.75rem 0;">
                        Your previous session was on {{ previous_session_date.strftime('%B %d, %Y') }}.
                    </p>
                    {% endif %}
                    <p style="color: var(--fg-muted); font-size: 0.8125rem; margin: 0; line-height: 1.5;">
                        When you start, Boswell will ask how you'd like to proceed:
                    </p>
                    <ul style="color: var(--fg-muted); font-size: 0.8125rem; margin: 0.5rem 0 0 0; padding-left: 1.25rem; line-height: 1.6;">
                        <li><strong>Continue</strong> - Pick up where you left off</li>
                        <li><strong>Add Detail</strong> - Expand on your previous answers</li>
                        <li><strong>Start Fresh</strong> - Begin a new interview</li>
                    </ul>
                </div>
            </div>
        </div>
        {% endif %}

        <form method="post" action="/i/{{ interview.magic_token }}/start" class="start-form">
            <p style="text-align: center; font-size: 0.8125rem; color: var(--fg-dim); margin-bottom: 1rem;">
                Starting this interview indicates your agreement to these terms.
            </p>
            <button type="submit" class="btn">
                {% if is_returning %}
                Start or Resume Interview
                {% else %}
                Start Interview
                {% endif %}
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </button>
        </form>

        <div class="guest-footer">
            Powered by Boswell, by EMIR
        </div>
    </div>
</div>
{% endblock %}
